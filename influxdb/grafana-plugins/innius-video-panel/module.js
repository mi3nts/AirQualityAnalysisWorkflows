define(["@grafana/data","react","@emotion/css","@grafana/ui"],((e,t,r,o)=>(()=>{"use strict";var n={644:e=>{e.exports=r},305:t=>{t.exports=e},388:e=>{e.exports=o},650:e=>{e.exports=t}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return n[e](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{i.r(s),i.d(s,{plugin:()=>N});var e={};i.r(e),i.d(e,{exclude:()=>$,extract:()=>I,parse:()=>S,parseUrl:()=>O,pick:()=>R,stringify:()=>F,stringifyUrl:()=>T});var t=i(305),r=i(650),o=i.n(r),n=i(644),a=i(388);const c="%[a-f0-9]{2}",l=new RegExp("("+c+")|([^%]+?)","gi"),u=new RegExp("("+c+")+","gi");function p(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(1===e.length)return e;t=t||1;const r=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],p(r),p(o))}function d(e){try{return decodeURIComponent(e)}catch{let t=e.match(l)||[];for(let r=1;r<t.length;r++)t=(e=p(t,r).join("")).match(l)||[];return e}}function f(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===e||""===t)return[];const r=e.indexOf(t);return-1===r?[]:[e.slice(0,r),e.slice(r+t.length)]}function m(e,t){const r={};if(Array.isArray(t))for(const o of t){const t=Object.getOwnPropertyDescriptor(e,o);t?.enumerable&&Object.defineProperty(r,o,t)}else for(const o of Reflect.ownKeys(e)){const n=Object.getOwnPropertyDescriptor(e,o);n.enumerable&&t(o,e[o],e)&&Object.defineProperty(r,o,n)}return r}const y=e=>null==e,g=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),h=Symbol("encodeFragmentIdentifier");function b(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function v(e,t){return t.encode?t.strict?g(e):encodeURIComponent(e):e}function w(e,t){return t.decode?function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return function(e){const t={"%FE%FF":"��","%FF%FE":"��"};let r=u.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{const e=d(r[0]);e!==r[0]&&(t[r[0]]=e)}r=u.exec(e)}t["%C2"]="�";const o=Object.keys(t);for(const r of o)e=e.replace(new RegExp(r,"g"),t[r]);return e}(e)}}(e):e}function x(e){return Array.isArray(e)?e.sort():"object"==typeof e?x(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function k(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function j(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function I(e){const t=(e=k(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function S(e,t){b((t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...t}).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,o)=>{t=/\[(\d*)]$/.exec(e),e=e.replace(/\[\d*]$/,""),t?(void 0===o[e]&&(o[e]={}),o[e][t[1]]=r):o[e]=r};case"bracket":return(e,r,o)=>{t=/(\[])$/.exec(e),e=e.replace(/\[]$/,""),t?void 0!==o[e]?o[e]=[...o[e],r]:o[e]=[r]:o[e]=r};case"colon-list-separator":return(e,r,o)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==o[e]?o[e]=[...o[e],r]:o[e]=[r]:o[e]=r};case"comma":case"separator":return(t,r,o)=>{const n="string"==typeof r&&r.includes(e.arrayFormatSeparator),a="string"==typeof r&&!n&&w(r,e).includes(e.arrayFormatSeparator);r=a?w(r,e):r;const i=n||a?r.split(e.arrayFormatSeparator).map((t=>w(t,e))):null===r?r:w(r,e);o[t]=i};case"bracket-separator":return(t,r,o)=>{const n=/(\[])$/.test(t);if(t=t.replace(/\[]$/,""),!n)return void(o[t]=r?w(r,e):r);const a=null===r?[]:r.split(e.arrayFormatSeparator).map((t=>w(t,e)));void 0!==o[t]?o[t]=[...o[t],...a]:o[t]=a};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[...[r[e]].flat(),t]:r[e]=t}}}(t),o=Object.create(null);if("string"!=typeof e)return o;if(!(e=e.trim().replace(/^[?#&]/,"")))return o;for(const n of e.split("&")){if(""===n)continue;const e=t.decode?n.replace(/\+/g," "):n;let[a,i]=f(e,"=");void 0===a&&(a=e),i=void 0===i?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?i:w(i,t),r(w(a,t),i,o)}for(const[e,r]of Object.entries(o))if("object"==typeof r&&null!==r)for(const[e,o]of Object.entries(r))r[e]=j(o,t);else o[e]=j(r,t);return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce(((e,t)=>{const r=o[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=x(r):e[t]=r,e}),Object.create(null))}function F(e,t){if(!e)return"";b((t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t}).arrayFormatSeparator);const r=r=>t.skipNull&&y(e[r])||t.skipEmptyString&&""===e[r],o=function(e){switch(e.arrayFormat){case"index":return t=>(r,o)=>{const n=r.length;return void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?r:null===o?[...r,[v(t,e),"[",n,"]"].join("")]:[...r,[v(t,e),"[",v(n,e),"]=",v(o,e)].join("")]};case"bracket":return t=>(r,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?r:null===o?[...r,[v(t,e),"[]"].join("")]:[...r,[v(t,e),"[]=",v(o,e)].join("")];case"colon-list-separator":return t=>(r,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?r:null===o?[...r,[v(t,e),":list="].join("")]:[...r,[v(t,e),":list=",v(o,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(o,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?o:(n=null===n?"":n,0===o.length?[[v(r,e),t,v(n,e)].join("")]:[[o,v(n,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?r:null===o?[...r,v(t,e)]:[...r,[v(t,e),"=",v(o,e)].join("")]}}(t),n={};for(const[t,o]of Object.entries(e))r(t)||(n[t]=o);const a=Object.keys(n);return!1!==t.sort&&a.sort(t.sort),a.map((r=>{const n=e[r];return void 0===n?"":null===n?v(r,t):Array.isArray(n)?0===n.length&&"bracket-separator"===t.arrayFormat?v(r,t)+"[]":n.reduce(o(r),[]).join("&"):v(r,t)+"="+v(n,t)})).filter((e=>e.length>0)).join("&")}function O(e,t){t={decode:!0,...t};let[r,o]=f(e,"#");return void 0===r&&(r=e),{url:r?.split("?")?.[0]??"",query:S(I(e),t),...t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:w(o,t)}:{}}}function T(e,t){t={encode:!0,strict:!0,[h]:!0,...t};const r=k(e.url).split("?")[0]||"";let o=F({...S(I(e.url),{sort:!1}),...e.query},t);o&&(o=`?${o}`);let n=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);if(e.fragmentIdentifier){const o=new URL(r);o.hash=e.fragmentIdentifier,n=t[h]?o.hash:`#${e.fragmentIdentifier}`}return`${r}${o}${n}`}function R(e,t,r){r={parseFragmentIdentifier:!0,[h]:!1,...r};const{url:o,query:n,fragmentIdentifier:a}=O(e,r);return T({url:o,query:m(n,t),fragmentIdentifier:a},r)}function $(e,t,r){return R(e,Array.isArray(t)?e=>!t.includes(e):(e,r)=>!t(e,r),r)}const E=e,U=e=>({wrapper:n.css`
      position: absolute;
    `,video:n.css`
      top: 0;
      left: 0;
    `}),N=new t.PanelPlugin((({options:e,data:t,width:r,height:i,replaceVariables:s})=>{const c=(0,a.useStyles)(U);let l,u=s(e.videoURL||"");if("youtube"===e.videoType){const t={loop:0,autoplay:0,playlist:e.videoId};e.autoPlay&&(t.autoplay=1),e.loop&&(t.loop=1),u="https://www.youtube.com/embed/"+e.videoId+"?"+E.stringify(t)}else"iframe"===e.videoType&&(u=s(e.iframeURL||""));return e.customBackground&&(l=e.backgroundColor||""),o().createElement("div",{className:(0,n.cx)(c.wrapper,n.css`
          width: ${r}px;
          height: ${i}px;
        `)},"url"===e.videoType?o().createElement("video",{className:(0,n.cx)(c.video,n.css`
              width: ${r}px;
              height: ${i}px;
            `),controls:!0,autoPlay:e.autoPlay,loop:e.loop,muted:!0},o().createElement("source",{src:u})):o().createElement("iframe",{frameBorder:"0",allow:e.geolocate?"geolocation":"",allowFullScreen:!0,className:(0,n.cx)(c.video,n.css`
              width: ${r}px;
              height: ${i}px;
              background: ${l};
            `),src:u}))})).setNoPadding().setPanelOptions((e=>e.addRadio({path:"videoType",name:"Source",defaultValue:"youtube",settings:{options:[{value:"url",label:"File"},{value:"youtube",label:"YouTube"},{value:"iframe",label:"iframe"}]}}).addTextInput({path:"videoId",name:"Video ID",description:"The value after watch?v= in the URL.",defaultValue:"eQpyJQ2womo",settings:{placeholder:"eQpyJQ2womo"},showIf:e=>"youtube"===e.videoType}).addTextInput({path:"videoURL",name:"URL",description:"A URL to a valid video file.",settings:{placeholder:"https://example.com/video.mp4"},showIf:e=>"url"===e.videoType}).addTextInput({path:"iframeURL",name:"URL",description:"A valid URL.",settings:{placeholder:"https://example.com/video"},showIf:e=>"iframe"===e.videoType}).addBooleanSwitch({path:"customBackground",name:"Custom Background",defaultValue:!1,showIf:e=>"iframe"===e.videoType}).addColorPicker({path:"backgroundColor",name:"Background Color",description:"The background color for the video",showIf:e=>e.customBackground&&"iframe"===e.videoType}).addBooleanSwitch({path:"autoPlay",name:"Autoplay",defaultValue:!0,showIf:e=>"iframe"!==e.videoType}).addBooleanSwitch({path:"loop",name:"Loop",defaultValue:!0,showIf:e=>"iframe"!==e.videoType}).addBooleanSwitch({path:"geolocate",name:"Geolocate",defaultValue:!1,showIf:e=>"iframe"===e.videoType})))})(),s})()));
//# sourceMappingURL=module.js.map